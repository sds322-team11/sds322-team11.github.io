---
title: "Analysis & Hypotheses"
pagetitle: 'Analysis & Hypotheses'
output: 
  html_document: 
    css: "styles.css"
---

```{r, include=FALSE}
htmltools::tagList(rmarkdown::html_dependency_font_awesome())

```
## Summary

We want to analyze the housing sales prices to analyze which variables influence the sales price the most. We also want to train a model that predicts the sales price of a house given the variables necessary, which will be completed under the [Modeling Page](/modeling)

To begin our analysis of the data we will create correlation matrices, visualize individual variables, and look at regression outputs to see what variables contribute the most to predicting sales price.

In order to complete the model training step, we will follow the following steps from class:
1. Choose a model
2. cost
3. a
4. a


## Importing Libraries + Loading Data

```{R, message=FALSE}
library(dplyr)
library(tidyr)
library(ggplot2)
library(readr)
library(tidyverse)
#install.packages("corrplot")
library(corrplot)
data <- read_csv("~/SDS322E/final_project_homepage/clean_train.csv")
head(data)

```

# Visualization

### Histogram of SalePrice (dependent variable):

```{R}


data %>% 
  ggplot(aes(x=SalePrice)) +
  geom_histogram(color = "#000000", fill = "#0099F8") + 
  labs(
    title = "Histogram of SalesPrice in Housing Data",
    caption = "Source: fill me in",
    x = "Sales Price in $USD",
    y = "Count"
  ) +
  theme_classic() +
  theme(
    plot.title = element_text(color = "#0099F8", size = 16, face = "bold"),
    plot.subtitle = element_text(size = 10, face = "bold"),
    plot.caption = element_text(face = "italic")
  )
head(data)
```

As you can see, the sales price of the homes is slightly right-skewed

```{R}
# Get only the numeric data
numeric_only <- data %>% select_if(is.numeric)
res <- cor(numeric_only)
res %>% pivot_longer(c(0,10), names_to = "var2")
#corrplot(res, tl.cex = .5)
```
TODO : create some sort of analysis of the categorical variables

```{R}
# Get only the categorical data
categorical <- data %>% select_if(negate(is.numeric))
categorical %>% glimpse()
```

## TODO: ANOVA 
Create some sort of analysis of variance

## TODO: Hypotheses

Now we have visualized our data, we can make some hypotheses

1. Hypothesis 1- Houses with an overall quality rating greater than 5 have on average a higher sales price.
```{R}
hyp1<-data %>%
  mutate(quality = case_when(
    (OverallQual<=5) ~ "lower quality",
    (OverallQual>5) ~ "higher quality"
    ))
t.test(SalePrice ~ quality, data = hyp1,
        var.equal = FALSE, alternative = "greater")
boxplot(SalePrice ~ quality, data = hyp1, xlab = "Quality Level",
   ylab = "Sales Price ($)", main = "Comparing Sales price of different Quality houses")
```
The one tailed t-test reveals that the there is a significant difference between the means of higher quality houses(quality>5) and lower quality houses(Overall quality <=5). Since the p-value is less than 0.05, we can reject the null hypothesis and accept the alternative that higher quality houses have a higher sales price.

2. Hypothesis 2- There is a significant difference in sale price of houses that have a foundation made of poured concrete vs. houses that have a foundation made of cinder blocks.
```{R}
data1<-data %>%
select(SalePrice, Foundation) %>%
  filter(Foundation=='PConc'|Foundation=='CBlock')
AOV<-aov(SalePrice~Foundation,data=data1)
summary(AOV)

summ<-data1%>% group_by(Foundation)%>% summarise(mean_price=mean(SalePrice))
ggplot(summ,aes(x=Foundation,y=mean_price))+geom_col()+labs(y="Mean Sales Price ($)",x="Foundation Type")+ggtitle("Mean Sales Price of Houses Varying in Foundation")

```
Based on the ANOVA test, we can conclude that there is a significant difference in sales price between houses that have foundations made of poured concrete and houses that have cinder blocks.


3. TODO Hypothesis 3

4. TODO Hypothesis 4

